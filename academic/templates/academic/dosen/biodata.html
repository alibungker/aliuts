{% extends 'academic/base.html' %}

{% block title %}Biodata Dosen{% endblock %}

{% block content %}
<style>
    .page-header { background: linear-gradient(135deg, #00c7be 0%, #00d4cb 100%); color: white; padding: 60px 0; margin: -40px 0 40px 0; border-radius: 0 0 40px 40px; box-shadow: 0 10px 40px rgba(0, 199, 190, 0.3); }
    .page-header h1 { font-size: 42px; font-weight: 600; margin-bottom: 10px; }
    .page-header p { font-size: 19px; opacity: 0.9; }
    .back-btn { display: inline-flex; align-items: center; gap: 8px; color: white; text-decoration: none; font-size: 16px; margin-bottom: 20px; padding: 8px 16px; background: rgba(255,255,255,0.2); border-radius: 980px; transition: all 0.3s ease; }
    .back-btn:hover { background: rgba(255,255,255,0.3); }

    .profile-section { background: white; border-radius: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); overflow: hidden; margin-bottom: 32px; }
    .profile-header { background: linear-gradient(135deg, #00c7be 0%, #00d4cb 100%); padding: 40px 24px; text-align: center; color: white; }
    .profile-avatar { width: 140px; height: 140px; background: white; border-radius: 50%; margin: 0 auto 20px; display: flex; align-items: center; justify-content: center; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2); }
    .profile-avatar svg { width: 72px; height: 72px; stroke: #00c7be; fill: none; stroke-width: 2; }
    .profile-name { font-size: 32px; font-weight: 700; margin-bottom: 8px; }
    .profile-nidn { font-size: 18px; opacity: 0.9; font-family: 'SF Mono', Monaco, monospace; margin-bottom: 4px; }
    .profile-status { display: inline-block; padding: 6px 16px; background: rgba(255,255,255,0.2); border-radius: 980px; font-size: 14px; font-weight: 600; margin-top: 8px; }

    .section-card { background: white; border-radius: 20px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.08); overflow: hidden; margin-bottom: 32px; }
    .section-header { background: linear-gradient(135deg, #f5f5f7 0%, #e8e8ed 100%); padding: 20px 24px; border-bottom: 1px solid #d2d2d7; }
    .section-header h2 { font-size: 20px; font-weight: 600; color: #1d1d1f; margin: 0; display: flex; align-items: center; gap: 10px; }
    .section-header svg { width: 22px; height: 22px; stroke: #00c7be; }

    .info-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1px; background: #f5f5f7; }
    .info-item { background: white; padding: 20px 24px; transition: background 0.2s ease; }
    .info-item:hover { background: #fbfbfd; }
    .info-label { font-size: 12px; color: #6e6e73; margin-bottom: 6px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; display: flex; align-items: center; gap: 6px; }
    .info-label svg { width: 14px; height: 14px; stroke: #6e6e73; }
    .info-value { font-size: 16px; color: #1d1d1f; font-weight: 500; }
    .info-value.empty { color: #86868b; font-style: italic; }

    .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; padding: 24px; background: #fbfbfd; }
    .stat-item { text-align: center; }
    .stat-label { font-size: 12px; color: #6e6e73; margin-bottom: 8px; font-weight: 600; text-transform: uppercase; }
    .stat-value { font-size: 24px; font-weight: 700; color: #00c7be; }

    @media (max-width: 768px) { .info-grid { grid-template-columns: 1fr; } .stats-grid { grid-template-columns: 1fr; } }
</style>

<div class="page-header">
    <div class="container">
        <a href="{% url 'dosen_dashboard' %}" class="back-btn">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M19 12H5M12 19l-7-7 7-7"></path>
            </svg>
            Kembali
        </a>
        <h1>Biodata Dosen</h1>
        <p>Data Pribadi dan Kepegawaian Lengkap</p>
    </div>
</div>

<div class="container">
    <!-- Edit Button -->
    <div style="margin-bottom: 24px; text-align: right;">
        <a href="{% url 'dosen_edit_biodata' %}" style="display: inline-flex; align-items: center; gap: 8px; background: #00c7be; color: white; padding: 12px 24px; border-radius: 980px; text-decoration: none; font-weight: 600; transition: all 0.3s ease;">
            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M11 4H4a2 2 0 00-2 2v14a2 2 0 002 2h14a2 2 0 002-2v-7"></path>
                <path d="M18.5 2.5a2.121 2.121 0 013 3L12 15l-4 1 1-4 9.5-9.5z"></path>
            </svg>
            Edit Biodata
        </a>
    </div>

    <!-- Profile Card -->
    <div class="profile-section">
        <div class="profile-header">
            <div class="profile-avatar">
                <svg viewBox="0 0 24 24">
                    <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                    <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path>
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 14l9-5-9-5-9 5 9 5zm0 0l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14zm-4 6v-7.5l4-2.222"></path>
                </svg>
            </div>
            <div class="profile-name">
                {% if dosen.gelar_depan %}{{ dosen.gelar_depan }} {% endif %}{{ dosen.nama }}{% if dosen.gelar_belakang %}, {{ dosen.gelar_belakang }}{% endif %}
            </div>
            <div class="profile-nidn">{{ dosen.nidn }}</div>
            <div class="profile-status">{{ dosen.status_kepegawaian|default:"Dosen Tetap" }}</div>
        </div>

        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-label">Jabatan</div>
                <div class="stat-value" style="font-size: 18px;">{{ dosen.jabatan }}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Program Studi</div>
                <div class="stat-value" style="font-size: 16px;">{{ dosen.program_studi.kode_prodi }}</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">Pendidikan Terakhir</div>
                <div class="stat-value" style="font-size: 18px;">{{ dosen.pendidikan_terakhir|default:"-" }}</div>
            </div>
        </div>
    </div>

    <!-- Data Pribadi -->
    <div class="section-card">
        <div class="section-header">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                Data Pribadi
            </h2>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                    </svg>
                    Nama Lengkap
                </div>
                <div class="info-value">{{ dosen.nama }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    NIDN
                </div>
                <div class="info-value">{{ dosen.nidn }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    Gelar Depan
                </div>
                <div class="info-value {% if not dosen.gelar_depan %}empty{% endif %}">
                    {{ dosen.gelar_depan|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path>
                    </svg>
                    Gelar Belakang
                </div>
                <div class="info-value {% if not dosen.gelar_belakang %}empty{% endif %}">
                    {{ dosen.gelar_belakang|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                        <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    Tempat Lahir
                </div>
                <div class="info-value {% if not dosen.tempat_lahir %}empty{% endif %}">
                    {{ dosen.tempat_lahir|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Tanggal Lahir
                </div>
                <div class="info-value {% if not dosen.tanggal_lahir %}empty{% endif %}">
                    {% if dosen.tanggal_lahir %}
                        {{ dosen.tanggal_lahir|date:"d F Y" }}
                    {% else %}
                        Belum diisi
                    {% endif %}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"></path>
                    </svg>
                    Jenis Kelamin
                </div>
                <div class="info-value {% if not dosen.jenis_kelamin %}empty{% endif %}">
                    {% if dosen.jenis_kelamin == 'L' %}
                        Laki-laki
                    {% elif dosen.jenis_kelamin == 'P' %}
                        Perempuan
                    {% else %}
                        Belum diisi
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Data Kontak -->
    <div class="section-card">
        <div class="section-header">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                </svg>
                Data Kontak
            </h2>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    Email
                </div>
                <div class="info-value {% if not dosen.email %}empty{% endif %}">
                    {{ dosen.email|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"></path>
                    </svg>
                    No Telepon
                </div>
                <div class="info-value {% if not dosen.no_telp %}empty{% endif %}">
                    {{ dosen.no_telp|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item" style="grid-column: 1 / -1;">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"></path>
                        <path d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"></path>
                    </svg>
                    Alamat
                </div>
                <div class="info-value {% if not dosen.alamat %}empty{% endif %}">
                    {{ dosen.alamat|default:"Belum diisi" }}
                </div>
            </div>
        </div>
    </div>

    <!-- Data Kepegawaian -->
    <div class="section-card">
        <div class="section-header">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                </svg>
                Data Kepegawaian
            </h2>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    NIDN
                </div>
                <div class="info-value">{{ dosen.nidn }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                    </svg>
                    NIP
                </div>
                <div class="info-value {% if not dosen.nip %}empty{% endif %}">
                    {{ dosen.nip|default:"Belum diisi" }}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                    </svg>
                    Status Kepegawaian
                </div>
                <div class="info-value">
                    {% if dosen.status_kepegawaian == 'PNS' %}
                        <span style="color: #30d158; font-weight: 600;">{{ dosen.get_status_kepegawaian_display }}</span>
                    {% elif dosen.status_kepegawaian == 'Tetap' %}
                        <span style="color: #0071e3; font-weight: 600;">{{ dosen.get_status_kepegawaian_display }}</span>
                    {% elif dosen.status_kepegawaian == 'Kontrak' %}
                        <span style="color: #ff9500; font-weight: 600;">{{ dosen.get_status_kepegawaian_display }}</span>
                    {% elif dosen.status_kepegawaian == 'Honorer' %}
                        <span style="color: #ff3b30; font-weight: 600;">{{ dosen.get_status_kepegawaian_display }}</span>
                    {% else %}
                        <span class="empty">Belum diisi</span>
                    {% endif %}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 13.255A23.931 23.931 0 0112 15c-3.183 0-6.22-.62-9-1.745M16 6V4a2 2 0 00-2-2h-4a2 2 0 00-2 2v2m4 6h.01M5 20h14a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path>
                    </svg>
                    Jabatan
                </div>
                <div class="info-value">{{ dosen.jabatan }}</div>
            </div>
        </div>
    </div>

    <!-- Data Akademik -->
    <div class="section-card">
        <div class="section-header">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                    <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path>
                </svg>
                Data Akademik
            </h2>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"></path>
                    </svg>
                    Program Studi
                </div>
                <div class="info-value">{{ dosen.program_studi.nama_prodi }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"></path>
                    </svg>
                    Kode Prodi
                </div>
                <div class="info-value">{{ dosen.program_studi.kode_prodi }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"></path>
                    </svg>
                    Jenjang
                </div>
                <div class="info-value">{{ dosen.program_studi.jenjang }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 14l9-5-9-5-9 5 9 5z"></path>
                        <path d="M12 14l6.16-3.422a12.083 12.083 0 01.665 6.479A11.952 11.952 0 0012 20.055a11.952 11.952 0 00-6.824-2.998 12.078 12.078 0 01.665-6.479L12 14z"></path>
                    </svg>
                    Pendidikan Terakhir
                </div>
                <div class="info-value {% if not dosen.pendidikan_terakhir %}empty{% endif %}">
                    {{ dosen.pendidikan_terakhir|default:"Belum diisi" }}
                </div>
            </div>
        </div>
    </div>

    <!-- Informasi Akun -->
    <div class="section-card">
        <div class="section-header">
            <h2>
                <svg viewBox="0 0 24 24" fill="none" stroke-width="2">
                    <path d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path>
                </svg>
                Informasi Akun
            </h2>
        </div>

        <div class="info-grid">
            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M15 7a2 2 0 012 2m4 0a6 6 0 01-7.743 5.743L11 17H9v2H7v2H4a1 1 0 01-1-1v-2.586a1 1 0 01.293-.707l5.964-5.964A6 6 0 1121 9z"></path>
                    </svg>
                    Username
                </div>
                <div class="info-value">{{ dosen.user.username }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"></path>
                    </svg>
                    Status Akun
                </div>
                <div class="info-value">
                    {% if dosen.user.is_active %}
                        <span style="color: #30d158; font-weight: 600;">Aktif</span>
                    {% else %}
                        <span style="color: #ff3b30; font-weight: 600;">Tidak Aktif</span>
                    {% endif %}
                </div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
                    </svg>
                    Bergabung Sejak
                </div>
                <div class="info-value">{{ dosen.user.date_joined|date:"d F Y" }}</div>
            </div>

            <div class="info-item">
                <div class="info-label">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    Login Terakhir
                </div>
                <div class="info-value">
                    {% if dosen.user.last_login %}
                        {{ dosen.user.last_login|date:"d F Y, H:i" }}
                    {% else %}
                        <span class="empty">Belum pernah login</span>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
